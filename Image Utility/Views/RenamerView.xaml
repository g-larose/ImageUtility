<UserControl
    x:Class="Image_Utility.Views.RenamerView"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:local="clr-namespace:Image_Utility.Views"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:md="http://materialdesigninxaml.net/winfx/xaml/themes"
    xmlns:converter="clr-namespace:Image_Utility.Converters"
    Width="1000"
    Height="600"
    mc:Ignorable="d">

    <UserControl.Resources>
        <converter:MultiValueConverter x:Key="multiValueConverter" />
    </UserControl.Resources>

    <UserControl.Triggers>
        <EventTrigger RoutedEvent="FrameworkElement.Loaded">
            <BeginStoryboard>
                <Storyboard>
                    <DoubleAnimation Storyboard.TargetProperty="(UIElement.RenderTransform).(TranslateTransform.Y)" 
                                     Storyboard.TargetName="AnimateGrid" Duration="0:0:0.2" From="-300" To="0"/>
                    <DoubleAnimation Storyboard.TargetProperty="Opacity" Duration="0:0:0.3" From="0" To="1" />
                </Storyboard>
            </BeginStoryboard>
        </EventTrigger>
    </UserControl.Triggers>
    <Grid Background="{StaticResource PrimaryColorBrush}"
          Name="AnimateGrid">
         <Grid.RenderTransform>
            <TranslateTransform />
         </Grid.RenderTransform>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="10" />
            <ColumnDefinition Width="*" />
            <ColumnDefinition Width="20" />
        </Grid.ColumnDefinitions>
        <Grid.RowDefinitions>
            <RowDefinition Height="60" />
            <RowDefinition Height="*" />
            <RowDefinition Height="40" />
        </Grid.RowDefinitions>
        <Grid Grid.Row="0"
              Grid.Column="1">
            <Grid.ColumnDefinitions>
                <ColumnDefinition />
                <ColumnDefinition />
            </Grid.ColumnDefinitions>
            <TextBlock Grid.Row="0"
                       Grid.Column="0"
                       Margin="10,10"
                       HorizontalAlignment="Left"
                       VerticalAlignment="Top"
                       FontSize="28"
                       Foreground="{StaticResource Primary900ColorBrush}"
                       Text="ReNamer Options" />
            <Button Background="{StaticResource Primary200ColorBrush}"
                    HorizontalAlignment="Left"
                    Grid.Column="1"
                    Grid.Row="0"
                    Height="50"
                    Width="156"
                    Foreground="{StaticResource GreenColorBrush}"
                    FontSize="18"
                    Content="Start Renaming"
                    BorderBrush="{StaticResource Primary500ColorBrush}"
                    BorderThickness="1"
                    Command="{Binding StartRenamingCommand}">
                <Button.IsEnabled>
                    <MultiBinding Converter="{StaticResource multiValueConverter}">
                        <Binding ElementName="txtSourceDir" Path="Text" />
                        <Binding ElementName="txtDestDir" Path="Text" />
                    </MultiBinding>
                </Button.IsEnabled>

            </Button>
        </Grid>
        
        <Grid
            Grid.Row="1"
            Grid.Column="1"
            Margin="10">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="500"/>
                <ColumnDefinition />

            </Grid.ColumnDefinitions>
            <Grid.RowDefinitions>
                <RowDefinition Height="90" />
                <RowDefinition Height="200"/>
                <RowDefinition Height="*" />
            </Grid.RowDefinitions>

            <!--#region Source/Destination Folder-->
            <StackPanel Grid.Column="0"
                        Grid.Row="0"
                        Orientation="Vertical"
                        Grid.ColumnSpan="2"
                        >
                <StackPanel Orientation="Horizontal" Height="40">
                    <TextBox Name="txtSourceDir"
                             Style="{StaticResource MaterialDesignFloatingHintTextBox}"
                             md:HintAssist.Hint="Image Source"
                             md:HintAssist.Foreground="{StaticResource Primary800ColorBrush}"
                             Foreground="Orange"
                             Background="{StaticResource PrimaryColorBrush}"
                             BorderBrush="{StaticResource Primary700ColorBrush}"
                             Height="38" 
                             Grid.Column="0"
                             Grid.Row="0"
                             Padding="8"
                             Width="500"
                             HorizontalAlignment="Left"
                             Text="{Binding SourceDir}"
                             FontSize="14"/>
                    <Button Grid.Column="1"
                            Grid.Row="0"
                            Style="{StaticResource MaterialDesignFloatingActionButton}"
                            Height="30"
                            Width="30"
                            BorderBrush="Transparent"
                            Foreground="{StaticResource GreenColorBrush}" 
                            Background="Transparent"
                            HorizontalAlignment="Left"
                            VerticalAlignment="Center"
                            Margin="10 -3 0 0"
                            Command="{Binding OpenSourceFolderCommand}">
                        <md:PackIcon Kind="Folder"
                                     Width="20"
                                     Height="20"
                                     HorizontalAlignment="Center"
                                     VerticalAlignment="Center" />
                    </Button>
                    <TextBlock Grid.Column="1"
                               Text="Files"
                               FontSize="16"
                               Foreground="{StaticResource SecondaryColorBrush}"
                               HorizontalAlignment="Left"
                               VerticalAlignment="Center" 
                               Margin="10 -3 0 0"/>
                    <TextBlock Grid.Column="1"
                               Text="{Binding FileCount, FallbackValue=0}"
                               FontSize="16"
                               Foreground="{StaticResource SecondaryColorBrush}"
                               HorizontalAlignment="Left"
                               VerticalAlignment="Center" 
                               Margin="20 -3 0 0"/>
                </StackPanel>
                <StackPanel Orientation="Horizontal" 
                            Height="40"
                            Margin="0 4">
                    <TextBox Name="txtDestDir"
                             Style="{StaticResource MaterialDesignFloatingHintTextBox}"
                             md:HintAssist.Hint="Save Destination"
                             md:HintAssist.Foreground="{StaticResource Primary800ColorBrush}"
                             Foreground="Orange"
                             Background="{StaticResource PrimaryColorBrush}"
                             BorderBrush="{StaticResource Primary700ColorBrush}"
                             Height="38" 
                             Grid.Column="0"
                             Grid.Row="0"
                             Width="500"
                             HorizontalAlignment="Left"
                             Text="{Binding DestinationDir}"
                             Padding="8"
                             FontSize="14"/>
                    <Button Grid.Column="1"
                            Grid.Row="0"
                            Style="{StaticResource MaterialDesignFloatingActionButton}"
                            Height="30"
                            Width="30"
                            BorderBrush="Transparent"
                            Foreground="{StaticResource GreenColorBrush}" 
                            Background="Transparent"
                            HorizontalAlignment="Left"
                            VerticalAlignment="Center"
                            Margin="10 -3 0 0"
                            Command="{Binding SetDestinationFolderCommand}">
                         <md:PackIcon Kind="Folder"
                                      Width="20"
                                      Height="20"
                                      HorizontalAlignment="Center"
                                      VerticalAlignment="Center" />
                    </Button>

                </StackPanel>
            </StackPanel>

            <!--#endregion-->

            <!--#region USE EXTERNAL TXT-->
            <StackPanel Grid.Row="1"
                        Grid.ColumnSpan="2"
                        Orientation="Horizontal"
                        Height="50"
                        Width="Auto"
                        VerticalAlignment="Top"
                        HorizontalAlignment="Left">
                <CheckBox Style="{StaticResource MaterialDesignActionDarkCheckBox}"
                          HorizontalAlignment="Left"
                          VerticalAlignment="Center"
                          Margin="0 4 0 0"
                          FontSize="18"
                          Foreground="Orange"
                          Background="{StaticResource SecondaryColorBrush}"
                          Height="30"
                          Width="30"
                          IsChecked="{Binding UseExternal}"
                          VerticalContentAlignment="Center"/>
                <TextBlock Text="Use External Txt File"
                           FontSize="18"
                           Foreground="{StaticResource Primary500ColorBrush}"
                           FontWeight="Bold"
                           Margin="10 2 0 0" 
                           Height="20"/>
                <TextBox Style="{StaticResource MaterialDesignFloatingHintTextBox}"
                         md:HintAssist.Hint="External Txt File"
                         md:HintAssist.Foreground="{StaticResource Primary800ColorBrush}"
                         Foreground="Orange"
                         Background="{StaticResource PrimaryColorBrush}"
                         BorderBrush="{StaticResource Primary700ColorBrush}"
                         Height="38" 
                         Width="274"
                         HorizontalAlignment="Left"
                         Text="{Binding ExternalFilePath}"
                         Padding="8"
                         FontSize="14"
                         Margin="14 0 2 0"
                         IsEnabled="{Binding UseExternal}"/>
                <Button Style="{StaticResource MaterialDesignFloatingActionButton}"
                        Height="30"
                        Width="30"
                        BorderBrush="Transparent"
                        Foreground="{StaticResource GreenColorBrush}" 
                        Background="Transparent"
                        VerticalAlignment="Center"
                        Margin="10 0"
                        IsEnabled="{Binding UseExternal}"
                        Command="{Binding SetExternalCommand}">
                     <md:PackIcon Kind="File"
                                  Width="20"
                                  Height="20"
                                  HorizontalAlignment="Center"
                                  VerticalAlignment="Center" />
                </Button>
                <TextBlock Text="?"
                           Foreground="{StaticResource GreenColorBrush}"
                           FontSize="18" 
                           HorizontalAlignment="Center"
                           VerticalAlignment="Center"/>
            </StackPanel>
            


            <!--#endregion-->
            
            <!--#region MATCH FOR-->
            
            <Border Width="400"
                    Height="125"
                    Grid.Row="1"
                    Grid.Column="0"
                    BorderBrush="{StaticResource Primary600ColorBrush}"
                    Background="{StaticResource PrimaryColorBrush}"
                    BorderThickness="1"
                    CornerRadius="4"
                    VerticalAlignment="Bottom"
                    HorizontalAlignment="Left"
                    Margin="6 10">


                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="10" />
                        <ColumnDefinition Width="100" />
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="10" />
                    </Grid.ColumnDefinitions>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="60"/>
                        <RowDefinition Height="60"/>

                    </Grid.RowDefinitions>
                    <TextBlock Grid.Column="1"
                               Grid.Row="0"
                               Text="Match:" 
                               VerticalAlignment="Center"
                               HorizontalAlignment="Right"
                               Foreground="{StaticResource Primary900ColorBrush}"
                               FontSize="16"
                               Margin="0 0 4 0"/>
                    <TextBox Grid.Column="2"
                             Height="40"
                             Style="{StaticResource RoundCornerTextBox}"
                             Foreground="{StaticResource Primary900ColorBrush}"
                             CaretBrush="{StaticResource Primary900ColorBrush}"
                             BorderBrush="{StaticResource Primary700ColorBrush}"
                             VerticalAlignment="Center"
                             Margin="0 6 4 0"
                             Padding="6 0 6 0"
                             TextAlignment="Justify"
                             FontSize="20"
                             Text="{Binding MatchFor, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
                    <TextBlock Grid.Column="1"
                               Grid.Row="1"
                               Text="Replace With:" 
                               VerticalAlignment="Center"
                               HorizontalAlignment="Right"
                               Foreground="{StaticResource Primary900ColorBrush}"
                               FontSize="16"
                               Margin="0 -6 4 0"/>
                    <TextBox Style="{StaticResource RoundCornerTextBox}"
                             Grid.Column="2"
                             Grid.Row="1"
                             Height="38"
                             Margin="0 -6 4 0"
                             TextAlignment="Justify"
                             FontSize="20"
                             Foreground="{StaticResource Primary900ColorBrush}"
                             CaretBrush="{StaticResource Primary900ColorBrush}"
                             BorderBrush="{StaticResource Primary700ColorBrush}"
                             Text="{Binding ReplaceWith, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
                </Grid>
            </Border>
            <!--#endregion-->

            <!--#region  FILE LIST -->
            <ListView Grid.Column="0"
                      Grid.Row="2"
                      Grid.ColumnSpan="2"
                      ItemsSource="{Binding Files}">
                <ListView.View>
                    <GridView>
                        <GridViewColumn Header="FileName" DisplayMemberBinding="{Binding fileName}"/>
                        <GridViewColumn Header="New FileName" DisplayMemberBinding="{Binding newFileName}"/>
                        <GridViewColumn Header="Source Dir" DisplayMemberBinding="{Binding sourceDest}" />
                        <GridViewColumn Header="Destination" DisplayMemberBinding="{Binding destination}" />
                    </GridView>
                </ListView.View>

            </ListView>

            <!--#endregion-->
        </Grid>
    </Grid>
</UserControl>
